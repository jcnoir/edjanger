<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="docker cli aliases configuration simplify">
        <meta name="author" content="pamtrak06@gmail.com">
        <link rel="canonical" href="https://pamtrak06.github.io/edjanger/usecases/">
        <link rel="shortcut icon" href="../img/favicon.ico">

        <title>How to - edjanger</title>

        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.min.css">
        <link href="../css/base.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="..">
            
            edjanger
            </a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
            
                
                <li >
                    <a href="..">
                      Home
                    </a>
                </li>
                
            
            
            
            
            
                
                <li class="active">
                    <a href="./">
                      How to
                    </a>
                </li>
                
            
            
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Api doc <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
                        <li >
                            <a href="../api/about/">about </a>
                        </li>
                        
                    
                        
                        <li >
                            <a href="../api/alias/">alias </a>
                        </li>
                        
                    
                        
                        <li >
                            <a href="../api/attach/">attach </a>
                        </li>
                        
                    
                        
                        <li >
                            <a href="../api/build/">build </a>
                        </li>
                        
                    
                        
                        <li >
                            <a href="../api/check/">check </a>
                        </li>
                        
                    
                        
                        <li >
                            <a href="../api/clean/">clean </a>
                        </li>
                        
                    
                        
                        <li >
                            <a href="../api/commit/">commit </a>
                        </li>
                        
                    
                        
                        <li >
                            <a href="../api/compose/">compose </a>
                        </li>
                        
                    
                        
                        <li >
                            <a href="../api/copy/">copy </a>
                        </li>
                        
                    
                        
                        <li >
                            <a href="../api/create/">create </a>
                        </li>
                        
                    
                        
                        <li >
                            <a href="../api/diff/">diff </a>
                        </li>
                        
                    
                        
                        <li >
                            <a href="../api/events/">events </a>
                        </li>
                        
                    
                        
                        <li >
                            <a href="../api/exec/">exec </a>
                        </li>
                        
                    
                        
                        <li >
                            <a href="../api/export/">export </a>
                        </li>
                        
                    
                        
                        <li >
                            <a href="../api/help/">help </a>
                        </li>
                        
                    
                        
                        <li >
                            <a href="../api/history/">history </a>
                        </li>
                        
                    
                        
                        <li >
                            <a href="../api/images/">images </a>
                        </li>
                        
                    
                        
                        <li >
                            <a href="../api/import/">import </a>
                        </li>
                        
                    
                        
                        <li >
                            <a href="../api/init/">init </a>
                        </li>
                        
                    
                        
                        <li >
                            <a href="../api/inspect/">inspect </a>
                        </li>
                        
                    
                        
                        <li >
                            <a href="../api/kill/">kill </a>
                        </li>
                        
                    
                        
                        <li >
                            <a href="../api/logs/">logs </a>
                        </li>
                        
                    
                        
                        <li >
                            <a href="../api/pause/">pause </a>
                        </li>
                        
                    
                        
                        <li >
                            <a href="../api/portdesc/">portdesc </a>
                        </li>
                        
                    
                        
                        <li >
                            <a href="../api/ports/">ports </a>
                        </li>
                        
                    
                        
                        <li >
                            <a href="../api/ps/">ps </a>
                        </li>
                        
                    
                        
                        <li >
                            <a href="../api/psa/">psa </a>
                        </li>
                        
                    
                        
                        <li >
                            <a href="../api/rename/">rename </a>
                        </li>
                        
                    
                        
                        <li >
                            <a href="../api/restart/">restart </a>
                        </li>
                        
                    
                        
                        <li >
                            <a href="../api/rm/">rm </a>
                        </li>
                        
                    
                        
                        <li >
                            <a href="../api/rmexiteds/">rmexiteds </a>
                        </li>
                        
                    
                        
                        <li >
                            <a href="../api/rmi/">rmi </a>
                        </li>
                        
                    
                        
                        <li >
                            <a href="../api/rmorphanedvolumes/">rmorphanedvolumes </a>
                        </li>
                        
                    
                        
                        <li >
                            <a href="../api/run/">run </a>
                        </li>
                        
                    
                        
                        <li >
                            <a href="../api/runi/">runi </a>
                        </li>
                        
                    
                        
                        <li >
                            <a href="../api/start/">start </a>
                        </li>
                        
                    
                        
                        <li >
                            <a href="../api/stats/">stats </a>
                        </li>
                        
                    
                        
                        <li >
                            <a href="../api/stop/">stop </a>
                        </li>
                        
                    
                        
                        <li >
                            <a href="../api/tag/">tag </a>
                        </li>
                        
                    
                        
                        <li >
                            <a href="../api/template/">template </a>
                        </li>
                        
                    
                        
                        <li >
                            <a href="../api/top/">top </a>
                        </li>
                        
                    
                        
                        <li >
                            <a href="../api/unalias/">unalias </a>
                        </li>
                        
                    
                        
                        <li >
                            <a href="../api/unpause/">unpause </a>
                        </li>
                        
                    
                        
                        <li >
                            <a href="../api/update/">update </a>
                        </li>
                        
                    
                        
                        <li >
                            <a href="../api/upgrade/">upgrade </a>
                        </li>
                        
                    
                        
                        <li >
                            <a href="../api/wait/">wait </a>
                        </li>
                        
                    
                    </ul>
                </li>
            
            
            
            
            
                
                <li >
                    <a href="../about/">
                      About
                    </a>
                </li>
                
            
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
            
            
            
            
            
            
            
            
            
              
                
                <li>
                    <a href="https://github.com/pamtrak06/edjanger">
                        
                            <i class="fa fa-gihub"></i>
                        
                        GitHub
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3">
<div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav"
    
        <li class="main active"><a href="#how-to">How to</a></li>
        
            <li><a href="#how-to-basic-commands">How to : basic commands</a></li>
        
            <li><a href="#how-to-docker">How to : docker</a></li>
        
            <li><a href="#how-to-useful">How to : useful</a></li>
        
            <li><a href="#how-to-compose">How to : compose</a></li>
        
            <li><a href="#how-to-template">How to : template</a></li>
        
            <li><a href="#how-to-crontab">How to : crontab</a></li>
        
    
    </ul>
</div>
</div>
            <div class="col-md-9" role="main">

<h1 id="how-to">How to</h1>
<h2 id="how-to-basic-commands">How to : basic commands</h2>
<p>All those command are compact and useful docker shortcuts !</p>
<table>
<thead>
<tr>
<th></th>
<th>Description</th>
<th>IMAGE</th>
<th>CONTAINER</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>edjangerbuild</code></td>
<td>"docker build" with parameters readed from local edjanger.properties.</td>
<td>X</td>
<td></td>
</tr>
<tr>
<td><code>edjangerclean</code></td>
<td>clean all images with none attribute (run docker rmi with "none" filter).</td>
<td>X</td>
<td></td>
</tr>
<tr>
<td><code>edjangercopy</code></td>
<td>"docker copy" with parameters readed from local edjanger.properties.</td>
<td></td>
<td>X</td>
</tr>
<tr>
<td><code>edjangerexec</code></td>
<td>"docker exec" with parameters readed from local edjanger.properties.</td>
<td></td>
<td>X</td>
</tr>
<tr>
<td><code>edjangerimages</code></td>
<td>"docker exec" with parameters readed from local edjanger.properties.</td>
<td>X</td>
<td></td>
</tr>
<tr>
<td><code>edjangerinspect</code></td>
<td>"docker inspect" with parameters readed from local edjanger.properties.</td>
<td></td>
<td>X</td>
</tr>
<tr>
<td><code>edjangerlogs</code></td>
<td>"docker logs" with parameters readed from local edjanger.properties.</td>
<td></td>
<td>X</td>
</tr>
<tr>
<td><code>edjangerps</code></td>
<td>"docker ps" with parameters readed from local edjanger.properties.</td>
<td></td>
<td>X</td>
</tr>
<tr>
<td><code>edjangerpsa</code></td>
<td>"docker ps -a" with parameters readed from local edjanger.properties.</td>
<td></td>
<td>X</td>
</tr>
<tr>
<td><code>edjangerrename</code></td>
<td>"docker rename" with parameters readed from local edjanger.properties.</td>
<td></td>
<td>X</td>
</tr>
<tr>
<td><code>edjangerrestart</code></td>
<td>"docker restart" with parameters readed from local edjanger.properties.</td>
<td></td>
<td>X</td>
</tr>
<tr>
<td><code>edjangerm</code></td>
<td>"docker rm" with parameters readed from local edjanger.properties.</td>
<td></td>
<td>X</td>
</tr>
<tr>
<td><code>edjangermi</code></td>
<td>"docker rmi" with parameters readed from local edjanger.properties.</td>
<td>X</td>
<td></td>
</tr>
<tr>
<td><code>edjangerun</code></td>
<td>"docker run -d" with parameters readed from local edjanger.properties.</td>
<td></td>
<td>X</td>
</tr>
<tr>
<td><code>edjangeruni</code></td>
<td>"docker run -it" with parameters readed from local edjanger.properties.</td>
<td></td>
<td>X</td>
</tr>
<tr>
<td><code>edockestart</code></td>
<td>"docker start" with parameters readed from local edjanger.properties.</td>
<td></td>
<td>X</td>
</tr>
<tr>
<td><code>edockestop</code></td>
<td>"docker stop" with parameters readed from local edjanger.properties.</td>
<td></td>
<td>X</td>
</tr>
<tr>
<td><code>edjangertag</code></td>
<td>"docker tag" with parameters readed from local edjanger.properties.</td>
<td></td>
<td>X</td>
</tr>
<tr>
<td><code>edjangertop</code></td>
<td>"docker top" with parameters readed from local edjanger.properties.</td>
<td></td>
<td>X</td>
</tr>
</tbody>
</table>
<h2 id="how-to-docker">How to : docker</h2>
<table>
<thead>
<tr>
<th></th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="api/edjangerportdesc.md">edjangerportdesc</a></td>
<td>"docker ports" on all running container.</td>
</tr>
<tr>
<td><a href="api/edjangerports.md">edjangerports</a></td>
<td>description of port.</td>
</tr>
<tr>
<td><code>edjangermexiteds</code></td>
<td>docker rm with list of container with exited status.</td>
</tr>
</tbody>
</table>
<h2 id="how-to-useful">How to : useful</h2>
<table>
<thead>
<tr>
<th></th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>edjangerabout</code></td>
<td>about script for edjanger.</td>
</tr>
<tr>
<td><code>edjangercheck</code></td>
<td>check missing parameters in edjanger.properties.</td>
</tr>
<tr>
<td><code>edjangeralias</code></td>
<td>print edjanger aliases.</td>
</tr>
<tr>
<td><code>edjangerunalias</code></td>
<td>help script for edjanger command.</td>
</tr>
</tbody>
</table>
<p><strong>Check missing parameters in edjanger.properties</strong></p>
<pre><code class="bash">edjangercheck
Check edjanger.properties...
  - check &quot;docker_command&quot;
  - check &quot;image_name&quot;
  - check &quot;build_path&quot;
  - check &quot;build_args&quot;
    WARNING: parameter is missing !!!
  - check &quot;build_forcerm&quot;
    WARNING: parameter is missing !!!
  - check &quot;build_rm&quot;
    WARNING: parameter is missing !!!
  - check &quot;build_nocache&quot;
    WARNING: parameter is missing !!!
  - check &quot;build_file&quot;
    WARNING: parameter is missing !!!
  - check &quot;container_name&quot;
  - check &quot;exposed_ports&quot;
  - check &quot;shared_volumes&quot;
    WARNING: parameter is missing !!!
  - check &quot;volumes_from&quot;
    WARNING: parameter is missing !!!
  - check &quot;environment_variables&quot;
    WARNING: parameter is missing !!!
  - check &quot;linked_containers&quot;
    WARNING: parameter is missing !!!
  - check &quot;force_rmi&quot;
    WARNING: parameter is missing !!!
  - check &quot;command_run&quot;
    WARNING: parameter is missing !!!
  =&gt; STATUS of configuration is: some parameters are undefined
</code></pre>

<p>Remark : even when parameters are missing in edjanger.properties, they are initialized empty.</p>
<h2 id="how-to-compose">How to : compose</h2>
<p>From an existing edjanger root path project structure, call edcokercompose.
Script will parse all edjanger.properties in subfolders and create docker-compose.yaml at upper path.</p>
<pre><code class="bash">edjangercompose
vi docker-compose.yaml
</code></pre>

<h2 id="how-to-template">How to : template</h2>
<blockquote>
<p>Prerequisities : install gettext (for envsubst)</p>
</blockquote>
<ul>
<li>
<p>Download and try example from <a href="https://github.com/pamtrak06/edjanger/tree/master/scripts/templates/templating">https://github.com/pamtrak06/edjanger/tree/master/scripts/templates/templating</a>, run:</p>
</li>
<li>
<p>Deploy 2 apache web sever (web1 and web2) with specific ports and shared volumes for a "production" environement.
    <code>bash
    ./deploy_run.sh production 5</code></p>
</li>
<li>
<p>Deploy 2 apache web server (web1 and web2) with specific ports and shared volumes for an "integration" environement.
    <code>bash
    ./deploy_run.sh integration 5</code></p>
</li>
<li>
<p>Instructions
From an existing edjanger root path project structure, do following</p>
<ul>
<li>rename all edjanger.properties to edjanger.template</li>
<li>define variable for element to be replaced with variable value from configuration file</li>
<li>create configuration files (<name>.properties) containing SHELL-FORMAT variable<ul>
<li>in each folder containing edjanger.properties (each configuration file must hase same name e.g.: production.properties)
or</li>
<li>only in root folder (e.g.: production.properties)</li>
</ul>
</li>
<li>call edjangertemplate with name of configuration file</li>
</ul>
</li>
</ul>
<pre><code>edjangertemplate &lt;name&gt;.properties
</code></pre>

<p>Example of edjangertemplate invocation</p>
<pre><code>edjangertemplate production.properties
</code></pre>

<p>Example of production.properties content</p>
<pre><code>#!/bin/bash
export HTTPD_PORT_80=80
export HTTPD_PORT_443=443
</code></pre>

<p>Example of edjanger.template content</p>
<pre><code>#exposed_ports:exposed port
exposed_ports=&quot;-p ${HTTPD_PORT_80}:80 -p ${HTTPD_PORT_443}:443&quot;
</code></pre>

<p>Script will find all edjanger.template and replace variables from root or folder(s) configuration(s) file(s) to produce edjanger.properties files.</p>
<p>Example of edjanger.properties produced</p>
<pre><code>#exposed_ports:exposed port
exposed_ports=&quot;-p 80:80 -p 443:443&quot;
</code></pre>

<h2 id="how-to-crontab">How to : crontab</h2>
<p>Configure automatic container restart at boot</p>
<p>To configure automatic restart of container at boot, configure edjanger.properties files :
- activate cron_start=true to start existing container at boot
- activate cron_build=true to build and start a new container at boot</p>
<p>Configure crontab with following parameters</p>
<pre><code>crontab -e
@reboot {edjangerpath}/cron_build_start.sh {edjanger properties path}
@reboot {edjangerpath}/cron_start_only.sh {edjanger properties path}
</code></pre>

<p>Example:</p>
<pre><code>crontab -e
@reboot /opt/edjanger/scripts/cron_build_start.sh /root/workspace/docker
@reboot /opt/edjanger/scripts/cron_start_only.sh /root/workspace/docker
</code></pre></div>
        </div>

    <footer class="col-md-12">
        <hr>
        
        <center>MIT licence, pamtrak06@gmail.com</center>
        
    </footer>

        <script src="../js/jquery.min.js"></script>
        <script src="../js/bootstrap.min.js"></script>
        <script src="../js/highlight.min.js"></script>
        <script src="../js/base.js"></script>
    </body>
</html>